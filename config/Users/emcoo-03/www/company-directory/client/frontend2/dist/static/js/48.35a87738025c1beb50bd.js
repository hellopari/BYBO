webpackJsonp([48],{Hkzq:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("bOdI"),i=a.n(s),r={data:function(){return{loading:!0,filters:{search:null,organizationId:this.$route.params.organizationId,page:0,size:9},totalDesserts:0,totalPages:0,pagination:i()({sortBy:"id"},"sortBy","amount"),limit:[9],headers:[{text:this.$t("chamber.member.send_email_title"),align:"left",value:"subject",sortable:!1},{text:this.$t("chamber.member.fromName"),align:"left",sortable:!1,value:"fromName"},{text:this.$t("chamber.member.from_number"),align:"left",value:"number"},{text:this.$t("chamber.know.time"),align:"left",sortable:!1,value:"type"}],desserts:[]}},watch:{pagination:{handler:function(){var t=this,e=this.pagination.sortBy;this.desserts=this.desserts.sort(function(a,s){var i=a[e],r=s[e];return t.pagination.descending?i<r?1:i>r?-1:0:i<r?-1:i>r?1:0})},deep:!0}},mounted:function(){this.filters.page=void 0!==this.$route.query.page?Number(this.$route.query.page)-1:0,this.reloadTable()},methods:{reloadTable:function(){var t=this;this.loading=!0,null===this.filters.search&&delete this.filters.search,this.$http.get("manager/mass_emails",{params:this.filters,headers:{"X-TENANT-ID":this.$route.params.organizationId}}).then(function(e){t.desserts=e.data.content,t.totalDesserts=e.data.totalElements,t.totalPages=e.data.totalPages,t.loading=!1})},handleInput:function(t){this.pagination.page=t,this.$router.push({path:"/organization/"+this.$route.params.organizationId+"/recording",query:{page:t}}),this.filters.page=t-1,this.reloadTable()}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-layout",{staticClass:"mx-4 mt-2",attrs:{row:"",wrap:"","align-center":"","fill-height":""}},[a("v-flex",{attrs:{md3:"",sm6:""}},[a("v-text-field",{staticClass:"px3",attrs:{label:t.$t("global.search_text"),"prepend-icon":"search",px3:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.reloadTable()}},model:{value:t.filters.search,callback:function(e){t.$set(t.filters,"search",e)},expression:"filters.search"}})],1),t._v(" "),a("v-flex",{attrs:{md1:"",sm2:"","offset-sm4":"","offset-md8":""}},[a("v-btn",{attrs:{color:"primary",to:{path:"/organization/"+t.$route.params.organizationId+"/emails"}}},[t._v("\n        "+t._s(t.$t("chamber.left.email"))+"\n      ")])],1)],1),t._v(" "),a("v-data-table",{staticClass:"rtable rtable--flip elevation-1",attrs:{"hide-actions":"",headers:t.headers,items:t.desserts,"no-data-text":t.$t("message.no_message"),pagination:t.pagination,"rows-per-page-items":t.limit,"total-items":t.totalDesserts,loading:t.loading},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[t._v(t._s(e.item.subject))]),t._v(" "),a("td",[t._v(t._s(e.item.fromName))]),t._v(" "),a("td",[t._v(t._s(e.item.number))]),t._v(" "),a("td",{staticClass:"text-xs-center"},[t._v(t._s(t._f("time")(e.item.createdAt)))])]}}])},[t._v(" "),a("template",{slot:"footer"},[a("td",{staticClass:"px-0",attrs:{colspan:t.headers.length+1}},[a("v-pagination",{staticClass:"pull-right my-2",attrs:{circle:"","total-visible":7,length:t.totalPages},on:{input:t.handleInput},model:{value:t.filters.page+1,callback:function(e){t.$set(t.filters,"page+1",e)},expression:"filters.page+1"}})],1)])],2)],1)},staticRenderFns:[]},l=a("VU/8")(r,n,!1,null,null,null);e.default=l.exports}});
webpackJsonp([13],{TeLI:function(t,e){},mvHQ:function(t,e,i){t.exports={default:i("qkKv"),__esModule:!0}},qkKv:function(t,e,i){var a=i("FeBl"),s=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return s.stringify.apply(s,arguments)}},xum0:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("mvHQ"),s=i.n(a),r=i("Dd8w"),c=i.n(r),n=i("NYxO"),l={computed:c()({},Object(n.c)(["company"])),metaInfo:function(){return{title:this.activity.title?this.activity.title:"企業廣場",titleTemplate:"%s - 簡介__新聞_活動_企業廣場-企業管理和推廣平台",meta:[{name:"keywords",content:this.activity.title?this.activity.title:"企業廣場"},{name:"description",content:this.activity.descrpition?this.activity.descrpition:"企業廣場"},{name:"og:url",content:this.$fileUrl+"/company/activity-detail?id="+this.orgId+"&actId="+this.activity.id},{name:"og:image",content:""+this.$fileUrl+this.metaImage}],htmlAttrs:{lang:"hk",amp:void 0}}},data:function(){return{orgId:null,actId:null,dialog:!1,activity:{},approvalType:null,ticketType:null,metaImage:null,price:null,currentDate:this.$moment(new Date),isLoading:!0,valid:!0,disabled:!1,numRemaining:"",orders:{order:{contact:null,phone:null,email:null,totalPrice:null,totalItemPrice:null,financialStatus:null},organizationId:this.$route.query.id,eventTicketId:null,eventId:this.$route.query.actId,userId:sessionStorage.getItem("userId"),orderLineItems:[]},items:[{text:this.$t("profile.home"),disabled:!1,href:"/company/home?id="+this.$route.query.id},{text:this.$t("cocShow.activity.coc_activity"),disabled:!1,href:"/company/activity?id="+this.$route.query.id}],num:1,btnName:"cocShow.activity.me_apply",rules:{required:function(t){return!!t||"This field is required"},email:function(t){return(t||"").match(/@/)||"Please enter a valid email"}}}},watch:{ticketType:function(){var t=this,e=this.activity.eventTickets.find(function(e){return e.name===t.ticketType});this.num=1,this.numRemaining=e.quantity-e.vendition-this.num}},methods:c()({},Object(n.b)(["snackbarStateChange"]),{reduce:function(){this.num>1&&this.ticketType&&(this.num--,this.numRemaining++)},add:function(){this.ticketType&&this.numRemaining>0&&(this.num++,this.numRemaining--)},chooseTicket:function(t,e,i,a){this.orders.eventTicketId=t,this.approvalType=e,this.ticketType=i,this.price=a,this.orders.order.totalPrice=this.price,this.orders.order.totalItemPrice=this.price},_initAcDetail:function(){var t=this;this.isLoading=!0,this.$http.get("public/events/"+this.actId).then(function(e){t.activity=e.data,t.$set(t.items,2,{text:t.activity.title,disabled:!0}),t.activity.eventTickets.length>0&&(t.orders.eventTicketId=t.activity.eventTickets[0].id,t.approvalType=t.activity.eventTickets[0].approvalType,t.ticketType=t.activity.eventTickets[0].name,t.price=t.activity.eventTickets[0].price),t.activity.eventFiles.length>0&&(t.metaImage=t.activity.eventFiles[0].key),t.orders.order.totalPrice=t.price,t.orders.order.totalItemPrice=t.price,t.activity.totalNumber=0,t.activity.eventTickets.forEach(function(e){t.activity.totalNumber=t.activity.totalNumber+e.vendition}),t.activity.isSignedAt=t.currentDate>t.activity.releasedAt,t.currentDate>t.activity.startedAt&&t.currentDate<t.activity.endedAt?t.activity.timeStatus="global.conduct":t.currentDate>t.activity.startedAt&&t.currentDate>t.activity.endedAt?t.activity.timeStatus="global.end":t.currentDate<t.activity.startedAt&&(t.activity.timeStatus="global.soon"),t.activity.totalNumber>=t.activity.personnelNumber&&0!==t.activity.personnelNumber&&(t.disabled=!0,t.btnName=t.$t("cocShow.home.full")),"global.end"===t.activity.timeStatus&&(t.disabled=!0,t.btnName=t.$t("cocShow.home.ended")),t.isLoading=!1})},readProfile:function(){var t=this;this.$http.get("public/user/"+sessionStorage.getItem("userId")+"/profiles").then(function(e){t.orders.order.contact=e.data.content[0].name,t.orders.order.phone=e.data.content[0].phone,t.orders.order.email=e.data.content[0].email})},openDialog:function(){if(this.$auth.isAuthenticated())if("user"===sessionStorage.getItem("role"))if("global.end"===this.activity.timeStatus)this.disabled=!0,this.btnName=this.$t("cocShow.home.ended");else{if(this.numRemaining<=0)return void this.snackbarStateChange({color:"error",text:"門票已售完",snackbar:!0});this.activity.eventTickets.length>0&&null!==this.orders.eventTicketId?(this.readProfile(),this.dialog=!0):this.snackbarStateChange({color:"error",text:this.$t("global.selectType"),snackbar:!0})}else console.log(1),this.snackbarStateChange({color:"error",text:"請退出重新登錄您的用戶賬號",snackbar:!0});else this.$auth.loginRedirect("/implicit/callback")},onSubmit:function(){this.orders.order.financialStatus="NONE"===this.approvalType?"PAID":"PENDING";for(var t=0;t<this.num;t++)this.orders.orderLineItems.push({title:this.ticketType,price:this.price,totalPrice:this.price,quantity:1,position:t});localStorage.setItem("orderItem",s()(this.orders)),this.$router.push({path:"/activity/"+this.$route.query.id+"/order/pay/"+this.activity.id})}}),mounted:function(){this.orgId=this.$route.query.id,this.actId=this.$route.query.actId,this._initAcDetail()}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"coco-show-activity-detail"},[i("v-container",{attrs:{fluid:""}},[i("ul",{staticClass:"v-breadcrumbs pl-0 theme--light",attrs:{"data-v-52b79048":""}},[i("li",[i("router-link",{attrs:{to:"/",ss:"v-breadcrumbs__item"}},[t._v(t._s(t.$t("profile.home")))])],1),t._v(" "),i("li",{staticClass:"v-breadcrumbs__divider"},[t._v(">")]),t._v(" "),i("li",[i("router-link",{staticClass:"v-breadcrumbs__item",attrs:{to:"/company/home?code="+t.$route.query.id}},[t._v(t._s(t.company))])],1),t._v(" "),i("li",{staticClass:"v-breadcrumbs__divider"},[t._v(">")]),t._v(" "),i("li",[i("router-link",{staticClass:"v-breadcrumbs__item",attrs:{to:"/company/activity?id="+t.$route.query.id}},[t._v("\n            "+t._s(t.$t("cocShow.activity.coc_activity"))+"\n          ")])],1),t._v(" "),i("li",{staticClass:"v-breadcrumbs__divider"},[t._v(">")]),t._v(" "),i("li",[i("a",{staticClass:"v-breadcrumbs__item v-breadcrumbs__item--disabled",attrs:{disabled:"disabled",href:"breadcrumbs_link_1"}},[t._v(t._s(t.activity.title))])])]),t._v(" "),i("v-layout",{staticClass:" py-2 xspadding-0",attrs:{column:""}},[i("v-flex",{staticClass:"text-xs-left module-tabs "},[i("h3",{staticClass:"diamonds headline"},[t._v(t._s(t.$t("cocShow.activity.activity_detail")))])]),t._v(" "),t.isLoading?i("v-flex",{staticClass:"white mt-5 py-5"},[i("div",{staticClass:"text-xs-center"},[i("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)]):t._e(),t._v(" "),t.isLoading?t._e():[i("v-flex",{staticClass:"mt-5"},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{md6:"",xs12:""}},[t.activity.eventFiles.length>0?[i("v-img",{attrs:{src:t.$fileUrl+"/public/uploads/o/company/event/"+t.activity.id+"/"+t.activity.eventFiles[0].key,"lazy-src":"https://dummyimage.com/600x400/ddd/fff"}})]:[i("v-img",{attrs:{src:"https://dummyimage.com/600x400/ddd/fff","lazy-src":"https://dummyimage.com/600x400/ddd/fff"}})]],2),t._v(" "),i("v-flex",{attrs:{md6:""}},[i("v-layout",{staticClass:"text-xs-left px-3 xspadding-0",attrs:{column:""}},[i("v-flex",[i("h4",{staticClass:"ac-title indigo--text text--darken-4"},[t._v(t._s(t.activity.title))])]),t._v(" "),i("v-flex",{staticClass:"mt-3"},[i("v-icon",{attrs:{size:"20"}},[t._v("update")]),t._v(" "),i("span",{staticClass:"vertical-m ml-2"},[t._v(t._s(t.$t("navbar.activity_time"))+":"+t._s(t._f("time")(t.activity.startedAt))+" ~ "+t._s(t._f("time")(t.activity.endedAt)))]),t._v(" "),i("span",{staticClass:"white--text caption px-1",class:{success:"global.conduct"===t.activity.timeStatus,error:"global.soon"===t.activity.timeStatus,"orange darken-1":"global.end"===t.activity.timeStatus}},[t._v(t._s(t.$t(t.activity.timeStatus)))])],1),t._v(" "),i("v-flex",{staticClass:"mt-3"},[i("v-icon",{attrs:{size:"20"}},[t._v("location_on")]),t._v(" "),i("span",{staticClass:"vertical-m ml-2 address"},[t._v(t._s(t.$t("chamber.activity.address"))+": "+t._s(t.activity.address))])],1),t._v(" "),i("v-flex",{staticClass:"mt-3"},[i("v-icon",{attrs:{size:"20"}},[t._v("people")]),t._v(" "),i("span",{staticClass:"vertical-m ml-2"},[t._v(t._s(t.$t("chamber.activity.scale"))+"："+t._s(t.activity.personnelNumber>0?t.activity.personnelNumber+"人":"不限")+" | "+t._s(t.activity.totalNumber)+t._s(t.$t("cocShow.activity.apply_num")))])],1),t._v(" "),i("v-flex",{staticClass:"mt-3"},[i("v-icon",{attrs:{size:"20"}},[t._v("access_time")]),t._v(" "),i("span",{staticClass:"vertical-m ml-2"},[t._v(t._s(t.$t("chamber.activity.signUpEndTimedAt"))+"："+t._s(t._f("time")(t.activity.releasedAt)))])],1)],1)],1)],1)],1),t._v(" "),t.activity.isSignedAt?t._e():i("v-flex",{staticClass:"mt-5"},[i("v-layout",{attrs:{row:"",wrap:""}},t._l(t.activity.eventTickets,function(e,a){return i("v-flex",{key:a,staticClass:"px-4 xspadding-0",attrs:{xs6:"",md4:""},on:{click:function(i){return t.chooseTicket(e.id,e.approvalType,e.name,e.price)}}},[i("v-btn",{staticClass:"btn subheading mx-auto",class:{active:e.id===t.orders.eventTicketId},attrs:{block:"",flat:""}},[i("span",[t._v(t._s(e.name))]),t._v(" "),i("span",{staticClass:"ml-3"},[t._v(t._s(0===e.price?""+t.$t("global.free"):"HK$"+e.price))])])],1)}),1),t._v(" "),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{staticClass:"px-4 xspadding-0",attrs:{xs6:"",md4:""}},[i("div",{staticClass:"add-btn d-flex"},[i("span",{staticClass:"cur-pointer",staticStyle:{"border-right":"1px solid #b3b3b3"},on:{click:t.reduce}},[t._v("-")]),t._v(" "),i("span",[t._v(t._s(t.num))]),t._v(" "),i("span",{staticClass:"cur-pointer",staticStyle:{"border-left":"1px solid #b3b3b3"},on:{click:t.add}},[t._v("+")])])]),t._v(" "),i("v-flex",{staticClass:"px-4",attrs:{xs6:"",md4:""}},[i("div",{staticClass:"add-text"},[t._v(t._s(t.numRemaining)+" "+t._s(t.$t("global.surplus")))])])],1),t._v(" "),i("v-layout",{staticClass:"mt-5",attrs:{row:"",wrap:"","align-center":"","justify-center":"",row:"","fill-height":""}},[i("v-flex",{attrs:{md3:"",xs6:""}},[i("v-btn",{attrs:{block:"",color:"primary",disabled:t.disabled,dark:""},on:{click:function(e){return t.openDialog()}}},[t._v(t._s(t.$t(t.btnName))+"\n                ")])],1)],1)],1),t._v(" "),i("v-flex",{staticClass:"mt-5 text-xs-left "},[i("div",{staticClass:"module-tabs"},[i("h4",{staticClass:"diamonds headline"},[t._v(t._s(t.$t("user.home.sponsor")))])]),t._v(" "),t.activity.organization?i("v-layout",{staticClass:"mt-4 xsmt-5",attrs:{wrap:""}},[i("v-flex",{attrs:{md6:""}},[i("div",[i("v-icon",{attrs:{size:"20"}},[t._v("people")]),t._v(" "),i("span",{staticClass:"vertical-m ml-2"},[t._v(t._s(t.$t("chamber.activity.sponsor_coc"))+"："+t._s(t.activity.organization.name))])],1),t._v(" "),i("div",{staticClass:"mt-4 xsmt-5"},[i("v-icon",{attrs:{size:"20"}},[t._v("phone")]),t._v(" "),i("span",{staticClass:"vertical-m ml-2"},[t._v(t._s(t.$t("chamber.create.phone"))+"："+t._s(t.activity.organization.phone))])],1)]),t._v(" "),i("v-flex",{attrs:{md6:""}},[i("div",[i("v-icon",{attrs:{size:"20"}},[t._v("person")]),t._v(" "),i("span",{staticClass:"vertical-m ml-2"},[t._v(t._s(t.$t("chamber.activity.sponsor"))+"："+t._s(t.activity.organization.name))])],1),t._v(" "),i("div",{staticClass:"mt-4 xsmt-5"},[i("v-icon",{attrs:{size:"20"}},[t._v("email")]),t._v(" "),i("span",{staticClass:"vertical-m ml-2"},[t._v(t._s(t.$t("chamber.create.email"))+"："+t._s(t.activity.organization.email))])],1)])],1):t._e()],1),t._v(" "),i("v-flex",{staticClass:"mt-5 text-xs-left html-conent"},[i("div",{staticClass:"module-tabs"},[i("h4",{staticClass:"diamonds headline"},[t._v(t._s(t.$t("chamber.activity.content")))])]),t._v(" "),i("div",{staticClass:"act-content mt-4",domProps:{innerHTML:t._s(t.activity.description)}})])]],2)],1),t._v(" "),i("v-layout",{attrs:{row:"","justify-center":""}},[i("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"title"},[t._v(t._s(t.$t("cocShow.activity.me_apply")))])]),t._v(" "),i("v-card-text",[i("v-container",{attrs:{"grid-list-md":""}},[i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-text-field",{attrs:{color:"purple darken-2",label:t.$t("user.user_baseinfo.name"),rules:[t.rules.required],clearable:""},model:{value:t.orders.order.contact,callback:function(e){t.$set(t.orders.order,"contact",e)},expression:"orders.order.contact"}})],1),t._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-text-field",{attrs:{color:"purple darken-2",label:t.$t("user.user_baseinfo.email"),rules:[t.rules.required,t.rules.email],clearable:""},model:{value:t.orders.order.email,callback:function(e){t.$set(t.orders.order,"email",e)},expression:"orders.order.email"}})],1),t._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-text-field",{attrs:{color:"purple darken-2",label:t.$t("user.user_baseinfo.phone"),rules:[t.rules.required],clearable:""},model:{value:t.orders.order.phone,callback:function(e){t.$set(t.orders.order,"phone",e)},expression:"orders.order.phone"}})],1)],1)],1)],1)],1),t._v(" "),i("v-card-actions",[i("v-spacer"),t._v(" "),i("v-btn",{attrs:{color:"darken-1",flat:""},nativeOn:{click:function(e){t.dialog=!1}}},[t._v(t._s(t.$t("button.cancel"))+"\n            ")]),t._v(" "),i("v-btn",{attrs:{color:"primary darken-1",disabled:!t.valid,loading:t.isLoading,flat:""},nativeOn:{click:function(e){return t.onSubmit()}}},[t._v(t._s(t.$t("button.save"))+"\n            ")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var v=i("VU/8")(l,o,!1,function(t){i("TeLI")},null,null);e.default=v.exports}});